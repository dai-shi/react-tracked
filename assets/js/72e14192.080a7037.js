"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[239],{7942:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return v}});var a=n(959);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),i=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=i(e.components);return a.createElement(u.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,u=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=i(n),m=r,v=p["".concat(u,".").concat(m)]||p[m]||d[m]||o;return n?a.createElement(v,l(l({ref:t},c),{},{components:n})):a.createElement(v,l({ref:t},c))}));function v(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=m;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s[p]="string"==typeof e?e:r,l[1]=s;for(var i=2;i<o;i++)l[i]=n[i];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8569:function(e,t,n){n.d(t,{Z:function(){return l}});var a=n(959),r=n(5924),o={tabItem:"tabItem_wZYq"};function l(e){var t=e.children,n=e.hidden,l=e.className;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(o.tabItem,l),hidden:n},t)}},710:function(e,t,n){n.d(t,{Z:function(){return S}});var a=n(1966),r=n(959),o=n(5924),l=n(4214),s=n(8903),u=n(1719),i=n(9121),c=n(7456);function p(e){return function(e){var t,n;return null!=(t=null==(n=r.Children.map(e,(function(e){if(!e||(0,r.isValidElement)(e)&&(t=e.props)&&"object"==typeof t&&"value"in t)return e;var t;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:n.filter(Boolean))?t:[]}(e).map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes,default:t.default}}))}function d(e){var t=e.values,n=e.children;return(0,r.useMemo)((function(){var e=null!=t?t:p(n);return function(e){var t=(0,i.l)(e,(function(e,t){return e.value===t.value}));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function m(e){var t=e.value;return e.tabValues.some((function(e){return e.value===t}))}function v(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId,o=(0,s.k6)(),l=function(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:n,groupId:a});return[(0,u._X)(l),(0,r.useCallback)((function(e){if(l){var t=new URLSearchParams(o.location.search);t.set(l,e),o.replace(Object.assign({},o.location,{search:t.toString()}))}}),[l,o])]}function f(e){var t,n,a,o,l=e.defaultValue,s=e.queryString,u=void 0!==s&&s,i=e.groupId,p=d(e),f=(0,r.useState)((function(){return function(e){var t,n=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+a.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}var r=null!=(t=a.find((function(e){return e.default})))?t:a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:l,tabValues:p})})),h=f[0],k=f[1],b=v({queryString:u,groupId:i}),y=b[0],g=b[1],S=(t=function(e){return e?"docusaurus.tab."+e:null}({groupId:i}.groupId),n=(0,c.Nk)(t),a=n[0],o=n[1],[a,(0,r.useCallback)((function(e){t&&o.set(e)}),[t,o])]),x=S[0],T=S[1],w=function(){var e=null!=y?y:x;return m({value:e,tabValues:p})?e:null}();return(0,r.useLayoutEffect)((function(){w&&k(w)}),[w]),{selectedValue:h,selectValue:(0,r.useCallback)((function(e){if(!m({value:e,tabValues:p}))throw new Error("Can't select invalid tab value="+e);k(e),g(e),T(e)}),[g,T,p]),tabValues:p}}var h=n(5922),k={tabList:"tabList_jK5K",tabItem:"tabItem_Jvfa"};function b(e){var t=e.className,n=e.block,s=e.selectedValue,u=e.selectValue,i=e.tabValues,c=[],p=(0,l.o5)().blockElementScrollPositionUntilNextRender,d=function(e){var t=e.currentTarget,n=c.indexOf(t),a=i[n].value;a!==s&&(p(t),u(a))},m=function(e){var t,n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":var a,r=c.indexOf(e.currentTarget)+1;n=null!=(a=c[r])?a:c[0];break;case"ArrowLeft":var o,l=c.indexOf(e.currentTarget)-1;n=null!=(o=c[l])?o:c[c.length-1]}null==(t=n)||t.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},t)},i.map((function(e){var t=e.value,n=e.label,l=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:s===t?0:-1,"aria-selected":s===t,key:t,ref:function(e){return c.push(e)},onKeyDown:m,onClick:d},l,{className:(0,o.Z)("tabs__item",k.tabItem,null==l?void 0:l.className,{"tabs__item--active":s===t})}),null!=n?n:t)})))}function y(e){var t=e.lazy,n=e.children,a=e.selectedValue,o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){var l=o.find((function(e){return e.props.value===a}));return l?(0,r.cloneElement)(l,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a})})))}function g(e){var t=f(e);return r.createElement("div",{className:(0,o.Z)("tabs-container",k.tabList)},r.createElement(b,(0,a.Z)({},e,t)),r.createElement(y,(0,a.Z)({},e,t)))}function S(e){var t=(0,h.Z)();return r.createElement(g,(0,a.Z)({key:String(t)},e))}},2425:function(e,t,n){n.r(t),n.d(t,{assets:function(){return d},contentTitle:function(){return c},default:function(){return h},frontMatter:function(){return i},metadata:function(){return p},toc:function(){return m}});var a=n(1966),r=n(9836),o=(n(959),n(7942)),l=n(710),s=n(8569),u=["components"],i={id:"quick-start",title:"Quick Start",sidebar_label:"Quick Start"},c=void 0,p={unversionedId:"quick-start",id:"quick-start",title:"Quick Start",description:"We explain how to use createContainer, which is very similar",source:"@site/docs/quick-start.md",sourceDirName:".",slug:"/quick-start",permalink:"/docs/quick-start",draft:!1,tags:[],version:"current",frontMatter:{id:"quick-start",title:"Quick Start",sidebar_label:"Quick Start"},sidebar:"docs",previous:{title:"Introduction",permalink:"/docs/introduction"},next:{title:"Comparison",permalink:"/docs/comparison"}},d={},m=[{value:"Create a new app",id:"create-a-new-app",level:2},{value:"Create a global state with pure React",id:"create-a-global-state-with-pure-react",level:2},{value:"Performance issue with pure React",id:"performance-issue-with-pure-react",level:2},{value:"Install React Tracked",id:"install-react-tracked",level:2},{value:"Use React Tracked instead of bare context",id:"use-react-tracked-instead-of-bare-context",level:2}],v={toc:m},f="wrapper";function h(e){var t=e.components,n=(0,r.Z)(e,u);return(0,o.kt)(f,(0,a.Z)({},v,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"We explain how to use ",(0,o.kt)("inlineCode",{parentName:"p"},"createContainer"),", which is very similar\nto how to use bare React Context for global state."),(0,o.kt)("p",null,"Let's try a minimal example from scratch."),(0,o.kt)("h2",{id:"create-a-new-app"},"Create a new app"),(0,o.kt)("p",null,"Use ",(0,o.kt)("a",{parentName:"p",href:"https://create-react-app.dev"},"create-react-app")," to create a new app."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npx create-react-app my-app # Add --template typescript for TypeScript\n")),(0,o.kt)("p",null,"Run the app."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cd my-app\nnpm start # Or yarn start\n")),(0,o.kt)("h2",{id:"create-a-global-state-with-pure-react"},"Create a global state with pure React"),(0,o.kt)("p",null,"Now, we create a global state that contains a number and a string."),(0,o.kt)("p",null,"Create a new file ",(0,o.kt)("inlineCode",{parentName:"p"},"./src/store.js"),". (",(0,o.kt)("inlineCode",{parentName:"p"},"./src/store.tsx")," for TypeScript)"),(0,o.kt)(l.Z,{defaultValue:"js",values:[{label:"JavaScript",value:"js"},{label:"TypeScript",value:"ts"}],mdxType:"TabsUsedByRemarkPluginTs2Js"},(0,o.kt)(s.Z,{value:"js",mdxType:"TabItemUsedByRemarkPluginTs2Js"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import React, { createContext, useState, useContext } from 'react';\n\nconst initialState = {\n  count: 0,\n  text: 'hello',\n};\n\nconst useMyState = () => useState(initialState);\n\nconst MyContext = createContext(null);\n\nexport const useSharedState = () => {\n  const value = useContext(MyContext);\n  if (value === null) throw new Error('Please add SharedStateProvider');\n  return value;\n};\n\nexport const SharedStateProvider = ({ children }) => (\n  <MyContext.Provider value={useMyState()}>{children}</MyContext.Provider>\n);\n\n"))),(0,o.kt)(s.Z,{value:"ts",mdxType:"TabItemUsedByRemarkPluginTs2Js"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import React, { ReactNode, createContext, useState, useContext } from 'react';\n\nconst initialState = {\n  count: 0,\n  text: 'hello',\n};\n\nconst useMyState = () => useState(initialState);\n\nconst MyContext = createContext<ReturnType<typeof useMyState> | null>(null);\n\nexport const useSharedState = () => {\n  const value = useContext(MyContext);\n  if (value === null) throw new Error('Please add SharedStateProvider');\n  return value;\n};\n\nexport const SharedStateProvider = ({ children }: { children: ReactNode }) => (\n  <MyContext.Provider value={useMyState()}>{children}</MyContext.Provider>\n);\n\n")))),(0,o.kt)("p",null,"Create a new file ",(0,o.kt)("inlineCode",{parentName:"p"},"./src/Counter.js"),". (",(0,o.kt)("inlineCode",{parentName:"p"},"./src/Counter.tsx")," for TypeScript)"),(0,o.kt)(l.Z,{defaultValue:"js",values:[{label:"JavaScript",value:"js"},{label:"TypeScript",value:"ts"}],mdxType:"TabsUsedByRemarkPluginTs2Js"},(0,o.kt)(s.Z,{value:"js",mdxType:"TabItemUsedByRemarkPluginTs2Js"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import React from 'react';\n\nimport { useSharedState } from './store';\n\nconst Counter = () => {\n  const [state, setState] = useSharedState();\n  const increment = () => {\n    setState((prev) => ({ ...prev, count: prev.count + 1 }));\n  };\n  return (\n    <div>\n      {state.count}\n      <button onClick={increment}>+1</button>\n    </div>\n  );\n};\n\nexport default Counter;\n\n"))),(0,o.kt)(s.Z,{value:"ts",mdxType:"TabItemUsedByRemarkPluginTs2Js"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import React from 'react';\n\nimport { useSharedState } from './store';\n\nconst Counter = () => {\n  const [state, setState] = useSharedState();\n  const increment = () => {\n    setState((prev) => ({ ...prev, count: prev.count + 1 }));\n  };\n  return (\n    <div>\n      {state.count}\n      <button onClick={increment}>+1</button>\n    </div>\n  );\n};\n\nexport default Counter;\n\n")))),(0,o.kt)("p",null,"Create a new file ",(0,o.kt)("inlineCode",{parentName:"p"},"./src/TextBox.js"),". (",(0,o.kt)("inlineCode",{parentName:"p"},"./src/TextBox.tsx")," for TypeScript)"),(0,o.kt)(l.Z,{defaultValue:"js",values:[{label:"JavaScript",value:"js"},{label:"TypeScript",value:"ts"}],mdxType:"TabsUsedByRemarkPluginTs2Js"},(0,o.kt)(s.Z,{value:"js",mdxType:"TabItemUsedByRemarkPluginTs2Js"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import React from 'react';\n\nimport { useSharedState } from './store';\n\nconst TextBox = () => {\n  const [state, setState] = useSharedState();\n  const setText = (text) => {\n    setState((prev) => ({ ...prev, text }));\n  };\n  return (\n    <div>\n      {state.text}\n      <input value={state.text} onChange={(e) => setText(e.target.value)} />\n    </div>\n  );\n};\n\nexport default TextBox;\n\n"))),(0,o.kt)(s.Z,{value:"ts",mdxType:"TabItemUsedByRemarkPluginTs2Js"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import React from 'react';\n\nimport { useSharedState } from './store';\n\nconst TextBox = () => {\n  const [state, setState] = useSharedState();\n  const setText = (text: string) => {\n    setState((prev) => ({ ...prev, text }));\n  };\n  return (\n    <div>\n      {state.text}\n      <input value={state.text} onChange={(e) => setText(e.target.value)} />\n    </div>\n  );\n};\n\nexport default TextBox;\n\n")))),(0,o.kt)("p",null,"Finally, modify the file ",(0,o.kt)("inlineCode",{parentName:"p"},"./src/App.js"),". (",(0,o.kt)("inlineCode",{parentName:"p"},"./src/App.tsx")," for TypeScript)"),(0,o.kt)(l.Z,{defaultValue:"js",values:[{label:"JavaScript",value:"js"},{label:"TypeScript",value:"ts"}],mdxType:"TabsUsedByRemarkPluginTs2Js"},(0,o.kt)(s.Z,{value:"js",mdxType:"TabItemUsedByRemarkPluginTs2Js"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\nimport { SharedStateProvider } from './store';\nimport Counter from './Counter';\nimport TextBox from './TextBox';\n\nconst App = () => (\n  <SharedStateProvider>\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <Counter />\n        <TextBox />\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n      </header>\n    </div>\n  </SharedStateProvider>\n);\n\nexport default App;\n\n"))),(0,o.kt)(s.Z,{value:"ts",mdxType:"TabItemUsedByRemarkPluginTs2Js"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\nimport { SharedStateProvider } from './store';\nimport Counter from './Counter';\nimport TextBox from './TextBox';\n\nconst App = () => (\n  <SharedStateProvider>\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <Counter />\n        <TextBox />\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n      </header>\n    </div>\n  </SharedStateProvider>\n);\n\nexport default App;\n\n")))),(0,o.kt)("p",null,"Check the running app again and see how the counter and the text box work."),(0,o.kt)("h2",{id:"performance-issue-with-pure-react"},"Performance issue with pure React"),(0,o.kt)("p",null,"Our app works totally fine.\nBut if a shared state becomes very big,\nwe may experience a drop in performance.\nThis is because all components that use the shared state\nwill re-render even if only a small part of the shared state is changed."),(0,o.kt)("p",null,"React Tracked solves this issue without efforts."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Note: In pure React, it's recommended to split context into pieces. Check out ",(0,o.kt)("a",{parentName:"p",href:"https://blog.axlight.com/posts/4-options-to-prevent-extra-rerenders-with-react-context/"},"this")," or ",(0,o.kt)("a",{parentName:"p",href:"https://www.basefactor.com/global-state-with-react"},"that")," for more information.")),(0,o.kt)("h2",{id:"install-react-tracked"},"Install React Tracked"),(0,o.kt)("p",null,"It's time to try React Tracked.\nLet's install the library."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install react-tracked # Or yarn add react-tracked\n")),(0,o.kt)("h2",{id:"use-react-tracked-instead-of-bare-context"},"Use React Tracked instead of bare context"),(0,o.kt)("p",null,"It's very simple.\nModify the file ",(0,o.kt)("inlineCode",{parentName:"p"},"./src/store.js"),". (",(0,o.kt)("inlineCode",{parentName:"p"},"./src/store.tsx")," for TypeScript)"),(0,o.kt)(l.Z,{defaultValue:"js",values:[{label:"JavaScript",value:"js"},{label:"TypeScript",value:"ts"}],mdxType:"TabsUsedByRemarkPluginTs2Js"},(0,o.kt)(s.Z,{value:"js",mdxType:"TabItemUsedByRemarkPluginTs2Js"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"import { useState } from 'react';\nimport { createContainer } from 'react-tracked';\n\nconst initialState = {\n  count: 0,\n  text: 'hello',\n};\n\nconst useMyState = () => useState(initialState);\n\nexport const { Provider: SharedStateProvider, useTracked: useSharedState } =\n  createContainer(useMyState);\n\n"))),(0,o.kt)(s.Z,{value:"ts",mdxType:"TabItemUsedByRemarkPluginTs2Js"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"import { useState } from 'react';\nimport { createContainer } from 'react-tracked';\n\nconst initialState = {\n  count: 0,\n  text: 'hello',\n};\n\nconst useMyState = () => useState(initialState);\n\nexport const { Provider: SharedStateProvider, useTracked: useSharedState } =\n  createContainer(useMyState);\n\n")))),(0,o.kt)("p",null,"That's it. Check the running app and see it works as before."),(0,o.kt)("p",null,"How can we see the difference?\nYou could add ",(0,o.kt)("inlineCode",{parentName:"p"},"console.log")," in render (which is technically a side effect),\nor add ",(0,o.kt)("inlineCode",{parentName:"p"},"{Math.random()}")," in JSX which is easier."),(0,o.kt)("p",null,"For example, modify the Counter component like this."),(0,o.kt)(l.Z,{defaultValue:"js",values:[{label:"JavaScript",value:"js"},{label:"TypeScript",value:"ts"}],mdxType:"TabsUsedByRemarkPluginTs2Js"},(0,o.kt)(s.Z,{value:"js",mdxType:"TabItemUsedByRemarkPluginTs2Js"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-javascript"},"const Counter = () => {\n  const [state, setState] = useSharedState();\n  const increment = () => {\n    setState((prev) => ({ ...prev, count: prev.count + 1 }));\n  };\n  return (\n    <div>\n      {state.count}\n      <button onClick={increment}>+1</button>\n      {Math.random()}\n    </div>\n  );\n};\n\n"))),(0,o.kt)(s.Z,{value:"ts",mdxType:"TabItemUsedByRemarkPluginTs2Js"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-typescript"},"const Counter = () => {\n  const [state, setState] = useSharedState();\n  const increment = () => {\n    setState((prev) => ({ ...prev, count: prev.count + 1 }));\n  };\n  return (\n    <div>\n      {state.count}\n      <button onClick={increment}>+1</button>\n      {Math.random()}\n    </div>\n  );\n};\n\n")))),(0,o.kt)("p",null,"With this, try both pure React version and React Tracked version."),(0,o.kt)("p",null,"In the React Tracked version,\nthe random number only changes when clicking the increment button.\nIt won't change when typing in the text box."))}h.isMDXComponent=!0}}]);