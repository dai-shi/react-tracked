"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[354],{6334:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var a=n(6070),t=n(7468);const i={id:"tutorial-04",title:"Tutorial with createContainer - ToDo App with Async Actions",sidebar_label:"ToDo App (async)"},r=void 0,o={id:"tutorial-04",title:"Tutorial with createContainer - ToDo App with Async Actions",description:"This tutorial shows example code with async actions.",source:"@site/docs/tutorial-04.md",sourceDirName:".",slug:"/tutorial-04",permalink:"/docs/tutorial-04",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"tutorial-04",title:"Tutorial with createContainer - ToDo App with Async Actions",sidebar_label:"ToDo App (async)"},sidebar:"docs",previous:{title:"ToDo App (useState+Immer)",permalink:"/docs/tutorial-03"},next:{title:"Person Name (redux)",permalink:"/docs/tutorial-redux-01"}},l={},c=[{value:"src/App.js",id:"srcappjs",level:2},{value:"src/store.js",id:"srcstorejs",level:2},{value:"src/TodoList.js",id:"srctodolistjs",level:2},{value:"src/TodoItem.js",id:"srctodoitemjs",level:2},{value:"src/NewTodo.js",id:"srcnewtodojs",level:2},{value:"CodeSandbox",id:"codesandbox",level:2}];function d(e){const s={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:["import TabsUsedByRemarkPluginTs2Js from '@theme/Tabs';\nimport TabItemUsedByRemarkPluginTs2Js from '@theme/TabItem';","\n",(0,a.jsx)(s.p,{children:"This tutorial shows example code with async actions."}),"\n",(0,a.jsx)(s.h2,{id:"srcappjs",children:"src/App.js"}),"\n","<TabsUsedByRemarkPluginTs2Js\n  defaultValue=\"js\"\n  values={[\n    { label: 'JavaScript', value: 'js', },\n    { label: 'TypeScript', value: 'ts', },\n  ]}\n>\n<TabItemUsedByRemarkPluginTs2Js value=\"js\">","\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-javascript",children:"[object Promise]\n"})}),"\n",'</TabItemUsedByRemarkPluginTs2Js>\n<TabItemUsedByRemarkPluginTs2Js value="ts">',"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-typescript",children:"[object Promise]\n"})}),"\n","</TabItemUsedByRemarkPluginTs2Js>\n</TabsUsedByRemarkPluginTs2Js>","\n",(0,a.jsx)(s.p,{children:"This is the root component.\nIt wraps TodoList with Provider."}),"\n",(0,a.jsx)(s.h2,{id:"srcstorejs",children:"src/store.js"}),"\n","<TabsUsedByRemarkPluginTs2Js\n  defaultValue=\"js\"\n  values={[\n    { label: 'JavaScript', value: 'js', },\n    { label: 'TypeScript', value: 'ts', },\n  ]}\n>\n<TabItemUsedByRemarkPluginTs2Js value=\"js\">","\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-javascript",children:"[object Promise]\n"})}),"\n",'</TabItemUsedByRemarkPluginTs2Js>\n<TabItemUsedByRemarkPluginTs2Js value="ts">',"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-typescript",children:"[object Promise]\n"})}),"\n","</TabItemUsedByRemarkPluginTs2Js>\n</TabsUsedByRemarkPluginTs2Js>","\n",(0,a.jsx)(s.p,{children:"This is the store we use.\nIt is a bit long and you would eventually want to split into files.\nIt defines a reducer for normal (sync) actions.\nThen, we combine it with async actioin handlers\nto create a store."}),"\n",(0,a.jsxs)(s.p,{children:["In this example we use ",(0,a.jsx)(s.code,{children:"use-reducer-async"})," helper hook.\nIt's a tiny custom hook, and actually it's fairly easy\nto do the same thing without the custom hook."]}),"\n",(0,a.jsxs)(s.p,{children:["You could also use ",(0,a.jsx)(s.code,{children:"redux-saga"})," for async actions.\nFor saga users, here is ",(0,a.jsx)(s.a,{href:"https://codesandbox.io/s/github/dai-shi/react-tracked/tree/main/examples/13_saga",children:"an example"}),"."]}),"\n",(0,a.jsxs)(s.p,{children:["Another note in this store is that it has both ",(0,a.jsx)(s.code,{children:"todoIds"})," and ",(0,a.jsx)(s.code,{children:"todoMap"}),".\nThey are denormalized. The reason for this pattern is\nit would allow state usage tracking easier.\nIn other words, we might not need ",(0,a.jsx)(s.code,{children:"React.memo"})," in a certain case.\nIf you want the data in the store to be normalized,\nplease check out the array pattern in ",(0,a.jsx)(s.a,{href:"/docs/tutorial-01",children:"the other Tutorial"}),"."]}),"\n",(0,a.jsx)(s.h2,{id:"srctodolistjs",children:"src/TodoList.js"}),"\n","<TabsUsedByRemarkPluginTs2Js\n  defaultValue=\"js\"\n  values={[\n    { label: 'JavaScript', value: 'js', },\n    { label: 'TypeScript', value: 'ts', },\n  ]}\n>\n<TabItemUsedByRemarkPluginTs2Js value=\"js\">","\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-javascript",children:"[object Promise]\n"})}),"\n",'</TabItemUsedByRemarkPluginTs2Js>\n<TabItemUsedByRemarkPluginTs2Js value="ts">',"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-typescript",children:"[object Promise]\n"})}),"\n","</TabItemUsedByRemarkPluginTs2Js>\n</TabsUsedByRemarkPluginTs2Js>","\n",(0,a.jsxs)(s.p,{children:["This component is to show the list of ",(0,a.jsx)(s.code,{children:"TodoItem"}),"s,\n",(0,a.jsx)(s.code,{children:"NewTodo"})," to create a new item, and\na text field for highlight query.\nIt will also show error and pending states."]}),"\n",(0,a.jsxs)(s.p,{children:["Notice it only passes ",(0,a.jsx)(s.code,{children:"id"})," to ",(0,a.jsx)(s.code,{children:"TodoItem"}),"."]}),"\n",(0,a.jsx)(s.h2,{id:"srctodoitemjs",children:"src/TodoItem.js"}),"\n","<TabsUsedByRemarkPluginTs2Js\n  defaultValue=\"js\"\n  values={[\n    { label: 'JavaScript', value: 'js', },\n    { label: 'TypeScript', value: 'ts', },\n  ]}\n>\n<TabItemUsedByRemarkPluginTs2Js value=\"js\">","\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-javascript",children:"[object Promise]\n"})}),"\n",'</TabItemUsedByRemarkPluginTs2Js>\n<TabItemUsedByRemarkPluginTs2Js value="ts">',"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-typescript",children:"[object Promise]\n"})}),"\n","</TabItemUsedByRemarkPluginTs2Js>\n</TabsUsedByRemarkPluginTs2Js>","\n",(0,a.jsx)(s.p,{children:"This is the TodoItem component.\nIt dispathes async actions,\nbut it doesn't need to know if an action is sync or async."}),"\n",(0,a.jsx)(s.h2,{id:"srcnewtodojs",children:"src/NewTodo.js"}),"\n","<TabsUsedByRemarkPluginTs2Js\n  defaultValue=\"js\"\n  values={[\n    { label: 'JavaScript', value: 'js', },\n    { label: 'TypeScript', value: 'ts', },\n  ]}\n>\n<TabItemUsedByRemarkPluginTs2Js value=\"js\">","\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-javascript",children:"[object Promise]\n"})}),"\n",'</TabItemUsedByRemarkPluginTs2Js>\n<TabItemUsedByRemarkPluginTs2Js value="ts">',"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-typescript",children:"[object Promise]\n"})}),"\n","</TabItemUsedByRemarkPluginTs2Js>\n</TabsUsedByRemarkPluginTs2Js>","\n",(0,a.jsx)(s.p,{children:"This is the NewTodo component to create a new item.\nIt uses a local state for the text field."}),"\n",(0,a.jsx)(s.h2,{id:"codesandbox",children:"CodeSandbox"}),"\n",(0,a.jsxs)(s.p,{children:["You can try ",(0,a.jsx)(s.a,{href:"https://codesandbox.io/s/festive-wiles-es8ss",children:"working example"}),"."]})]})}function u(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},7468:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>o});var a=n(758);const t={},i=a.createContext(t);function r(e){const s=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),a.createElement(i.Provider,{value:s},e.children)}}}]);